{"version":3,"file":"_page.svelte.js","sources":["../../../../../src/lib/components/Layout.svelte","../../../../../src/routes/+page.svelte"],"sourcesContent":["<!--\n  Main Layout Component\n\n  Renders the complete LoFi Piano UI including:\n  - Piano keyboard\n  - Control panel with effect parameters\n  - Audio state management\n-->\n\n<script>\n  import { onMount } from 'svelte';\n  import { unlockAudioContext } from '$audio/context.js';\n  import { createAudioState } from '$stores/audio-state.svelte.js';\n  import PianoKeyboard from '$components/piano/PianoKeyboard.svelte';\n  import ControlPanel from '$components/controls/ControlPanel.svelte';\n  import ChordGenerator from '$components/chord-generator/ChordGenerator.svelte';\n\n  // Create audio state instance\n  const audioState = createAudioState();\n\n  let isReady = $state(false);\n  let error = $state(null);\n  let currentView = $state('piano'); // 'piano' | 'chords'\n\n  onMount(async () => {\n    try {\n      // Unlock AudioContext for iOS/mobile browsers\n      await unlockAudioContext();\n\n      // Initialize audio system\n      await audioState.init();\n\n      isReady = true;\n      console.log('‚úì LoFi Piano initialized');\n      console.log('  - Audio context ready');\n      console.log('  - Effect chain connected');\n      console.log('  - Ready to play');\n    } catch (err) {\n      console.error('Failed to initialize audio:', err);\n      error = err.message;\n    }\n  });\n\n  /**\n   * Switch between Piano and Chord Generator views\n   */\n  function switchView(view) {\n    currentView = view;\n  }\n</script>\n\n<main>\n  <div class=\"container\">\n    <!-- Header Section -->\n    <header class=\"app-header\">\n      <div class=\"header-content\">\n        <h1 class=\"app-title\">üéπ LoFi Piano</h1>\n        <p class=\"app-subtitle\">Nostalgic warm piano for lo-fi beats</p>\n      </div>\n      \n      {#if isReady}\n        <!-- Tab Navigation -->\n        <div class=\"view-tabs\" role=\"tablist\">\n          <button\n            class=\"tab\"\n            class:active={currentView === 'piano'}\n            onclick={() => switchView('piano')}\n            role=\"tab\"\n            aria-selected={currentView === 'piano'}\n            aria-controls=\"piano-panel\"\n          >\n            Piano\n          </button>\n          <button\n            class=\"tab\"\n            class:active={currentView === 'chords'}\n            onclick={() => switchView('chords')}\n            role=\"tab\"\n            aria-selected={currentView === 'chords'}\n            aria-controls=\"chords-panel\"\n          >\n            Chord Generator\n          </button>\n        </div>\n        \n        <!-- Status Info -->\n        <div class=\"status-info\">\n          <span class=\"status-indicator\">‚óè Live</span>\n          <span class=\"note-count\">\n            {audioState.pianoState.activeNotes.size} notes\n          </span>\n        </div>\n      {/if}\n    </header>\n\n    {#if error}\n      <!-- Error State -->\n      <div class=\"error-state\">\n        <p class=\"error-icon\">‚ö†Ô∏è</p>\n        <h2>Audio Initialization Failed</h2>\n        <p class=\"error-message\">{error}</p>\n        <p class=\"error-help\">\n          Try refreshing the page or check browser console for details.\n        </p>\n      </div>\n    {:else if isReady}\n      <!-- Main Content with View Switching -->\n      <div class=\"app-content\">\n        {#if currentView === 'piano'}\n          <div class=\"piano-view\" id=\"piano-panel\" role=\"tabpanel\">\n            <ControlPanel {audioState} />\n            <div class=\"keyboard-wrapper\">\n              <PianoKeyboard {audioState} />\n            </div>\n          </div>\n        {:else if currentView === 'chords'}\n          <div class=\"chords-view\" id=\"chords-panel\" role=\"tabpanel\">\n            <ChordGenerator {audioState} />\n          </div>\n        {/if}\n      </div>\n    {:else}\n      <!-- Loading State -->\n      <div class=\"loading\">\n        <div class=\"spinner\"></div>\n        <p>Initializing audio system...</p>\n        <p class=\"loading-hint\">Click anywhere to unlock audio (iOS/mobile)</p>\n      </div>\n    {/if}\n  </div>\n</main>\n\n<style>\n  /* ========================================\n     LAYOUT CONTAINER - Vintage Aesthetic\n     ======================================== */\n  \n  main {\n    min-height: 100vh;\n    padding: var(--space-6);\n    background: var(--bg-primary);\n  }\n\n  .container {\n    max-width: var(--container-2xl);\n    width: 100%;\n    margin: 0 auto;\n  }\n\n  /* ========================================\n     HEADER & NAVIGATION\n     ======================================== */\n  \n  .app-header {\n    display: flex;\n    flex-direction: column;\n    gap: var(--space-4);\n    padding-bottom: var(--space-6);\n    margin-bottom: var(--space-8);\n    border-bottom: 2px solid var(--border-color);\n  }\n\n  .header-content {\n    text-align: center;\n  }\n\n  .app-title {\n    font-size: var(--font-size-2xl);\n    font-weight: var(--font-weight-bold);\n    color: var(--text-primary);\n    margin: 0 0 var(--space-2) 0;\n    letter-spacing: var(--letter-spacing-wide);\n  }\n\n  .app-subtitle {\n    font-size: var(--font-size-base);\n    color: var(--text-secondary);\n    margin: 0;\n    font-weight: var(--font-weight-normal);\n  }\n\n  /* Tab Navigation */\n  .view-tabs {\n    display: flex;\n    justify-content: center;\n    gap: var(--space-2);\n    padding: 0;\n  }\n\n  .tab {\n    padding: var(--space-3) var(--space-6);\n    background: var(--bg-secondary);\n    color: var(--text-secondary);\n    border: var(--border-default);\n    border-radius: var(--border-radius-md);\n    font-size: var(--font-size-base);\n    font-weight: var(--font-weight-semibold);\n    cursor: pointer;\n    transition: var(--transition-colors);\n    letter-spacing: var(--letter-spacing-wide);\n  }\n\n  .tab:hover {\n    background: var(--accent);\n    color: var(--text-primary);\n    border-color: var(--accent-hover);\n  }\n\n  .tab.active {\n    background: var(--accent);\n    color: var(--text-primary);\n    border-color: var(--accent-hover);\n    box-shadow: var(--shadow-md);\n  }\n\n  .tab:focus-visible {\n    outline: var(--border-width-normal) solid var(--accent);\n    outline-offset: 2px;\n  }\n\n  /* Status Info */\n  .status-info {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: var(--space-4);\n    font-size: var(--font-size-sm);\n    color: var(--text-secondary);\n  }\n\n  .status-indicator {\n    color: var(--color-success);\n    font-weight: var(--font-weight-semibold);\n  }\n\n  .note-count {\n    padding: var(--space-1) var(--space-3);\n    background: var(--bg-secondary);\n    border-radius: var(--border-radius-sm);\n    border: var(--border-default);\n    font-weight: var(--font-weight-medium);\n    font-family: var(--font-family-mono);\n  }\n\n  /* ========================================\n     MAIN CONTENT VIEWS\n     ======================================== */\n  \n  .app-content {\n    width: 100%;\n  }\n\n  .piano-view,\n  .chords-view {\n    display: flex;\n    flex-direction: column;\n    gap: var(--gap-sections);\n    animation: fadeIn var(--transition-base) var(--ease-out);\n  }\n\n  .keyboard-wrapper {\n    width: 100%;\n  }\n\n  @keyframes fadeIn {\n    from {\n      opacity: 0;\n      transform: translateY(8px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n\n  /* ========================================\n     ERROR STATE\n     ======================================== */\n  \n  .error-state {\n    text-align: center;\n    padding: var(--space-16);\n    color: var(--color-error);\n  }\n\n  .error-icon {\n    font-size: 4rem;\n    margin: 0;\n  }\n\n  .error-state h2 {\n    color: var(--color-error);\n    margin: var(--space-4) 0;\n    font-weight: var(--font-weight-bold);\n  }\n\n  .error-message {\n    color: var(--color-error);\n    font-family: var(--font-family-mono);\n    background: var(--bg-secondary);\n    padding: var(--space-4);\n    border-radius: var(--border-radius-md);\n    border: var(--border-width-thin) solid var(--color-error);\n    margin: var(--space-4) auto;\n    max-width: 600px;\n    font-size: var(--font-size-sm);\n  }\n\n  .error-help {\n    color: var(--text-secondary);\n    font-size: var(--font-size-sm);\n    margin-top: var(--space-4);\n  }\n\n  /* ========================================\n     LOADING STATE\n     ======================================== */\n  \n  .loading {\n    text-align: center;\n    color: var(--text-secondary);\n    padding: var(--space-16);\n  }\n\n  .spinner {\n    width: 50px;\n    height: 50px;\n    margin: 0 auto var(--space-6);\n    border: 4px solid var(--border-color);\n    border-top-color: var(--accent);\n    border-radius: var(--border-radius-full);\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  .loading p {\n    margin: var(--space-2) 0;\n    color: var(--text-primary);\n    font-size: var(--font-size-base);\n  }\n\n  .loading-hint {\n    font-size: var(--font-size-sm);\n    color: var(--text-muted);\n    font-style: italic;\n  }\n\n  /* ========================================\n     RESPONSIVE DESIGN\n     ======================================== */\n  \n  @media (max-width: 1024px) {\n    main {\n      padding: var(--space-4);\n    }\n\n    .app-header {\n      gap: var(--space-3);\n    }\n\n    .app-title {\n      font-size: var(--font-size-xl);\n    }\n  }\n\n  @media (max-width: 768px) {\n    main {\n      padding: var(--space-3);\n    }\n\n    .app-header {\n      gap: var(--space-3);\n      margin-bottom: var(--space-6);\n    }\n\n    .app-title {\n      font-size: var(--font-size-lg);\n    }\n\n    .app-subtitle {\n      font-size: var(--font-size-sm);\n    }\n\n    .view-tabs {\n      flex-direction: column;\n      gap: var(--space-2);\n    }\n\n    .tab {\n      width: 100%;\n    }\n\n    .status-info {\n      flex-direction: column;\n      gap: var(--space-2);\n    }\n\n    .piano-view,\n    .chords-view {\n      gap: var(--gap-controls);\n    }\n  }\n\n  /* ========================================\n     ACCESSIBILITY\n     ======================================== */\n  \n  @media (prefers-reduced-motion: reduce) {\n    .piano-view,\n    .chords-view {\n      animation: none;\n    }\n\n    .spinner {\n      animation: spin 2s linear infinite;\n    }\n  }\n</style>\n","<!--\n  LoFi Piano Plugin - Main Page\n\n  This is the single-page app entry point.\n  The entire plugin UI renders on this page.\n-->\n\n<script>\n  import { onMount } from 'svelte';\n  import Layout from '$components/Layout.svelte';\n\n  onMount(() => {\n    console.log('üéπ LoFi Piano loaded');\n  });\n</script>\n\n<Layout />\n\n<style>\n  :global(main) {\n    width: 100%;\n    height: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n</style>\n"],"names":[],"mappings":";;wCAAA;;;;;;;;;;;;;;;EAiDA,CAAA;;;wCCjDA;;EAcA,CAAA;;"}