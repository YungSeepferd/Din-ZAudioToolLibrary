{"version":3,"file":"_page.svelte.js","sources":["../../../../../src/lib/components/Layout.svelte","../../../../../src/routes/+page.svelte"],"sourcesContent":["<!--\n  Main Layout Component\n\n  Renders the complete LoFi Piano UI including:\n  - Piano keyboard\n  - Control panel with effect parameters\n  - Audio state management\n-->\n\n<script>\n  import { onMount } from 'svelte';\n  import { unlockAudioContext } from '$audio/context.js';\n  import { createAudioState } from '$stores/audio-state.svelte.js';\n  import PianoKeyboard from '$components/piano/PianoKeyboard.svelte';\n  import ControlPanel from '$components/controls/ControlPanel.svelte';\n\n  // Create audio state instance\n  const audioState = createAudioState();\n\n  let isReady = $state(false);\n  let error = $state(null);\n  let showControls = $state(true);\n\n  onMount(async () => {\n    try {\n      // Unlock AudioContext for iOS/mobile browsers\n      await unlockAudioContext();\n\n      // Initialize audio system\n      await audioState.init();\n\n      isReady = true;\n      console.log('‚úì LoFi Piano initialized');\n      console.log('  - Audio context ready');\n      console.log('  - Effect chain connected');\n      console.log('  - Ready to play');\n    } catch (err) {\n      console.error('Failed to initialize audio:', err);\n      error = err.message;\n    }\n  });\n\n  /**\n   * Toggle control panel visibility\n   */\n  function toggleControls() {\n    showControls = !showControls;\n  }\n</script>\n\n<main>\n  <div class=\"container\">\n    <!-- Header Section -->\n    <div class=\"header\">\n      <h1>üéπ LoFi Piano</h1>\n      <p class=\"subtitle\">Nostalgic warm piano for lo-fi hip-hop beats</p>\n\n      {#if isReady}\n        <div class=\"status-bar\">\n          <span class=\"status-indicator active\">‚óè Live</span>\n          <span class=\"note-count\">\n            {audioState.pianoState.activeNotes.size} notes playing\n          </span>\n          <button class=\"toggle-btn\" onclick={toggleControls}>\n            {showControls ? '‚ñº Hide Controls' : '‚ñ∂ Show Controls'}\n          </button>\n        </div>\n      {/if}\n    </div>\n\n    {#if error}\n      <!-- Error State -->\n      <div class=\"error-state\">\n        <p class=\"error-icon\">‚ö†Ô∏è</p>\n        <h2>Audio Initialization Failed</h2>\n        <p class=\"error-message\">{error}</p>\n        <p class=\"error-help\">\n          Try refreshing the page or check browser console for details.\n        </p>\n      </div>\n    {:else if isReady}\n      <!-- Main Content -->\n      <div class=\"content\">\n        <!-- Control Panel Section -->\n        {#if showControls}\n          <div class=\"controls-section\">\n            <ControlPanel {audioState} />\n          </div>\n        {/if}\n\n        <!-- Piano Keyboard Section -->\n        <div class=\"keyboard-section\">\n          <PianoKeyboard {audioState} />\n        </div>\n\n        <!-- Info Section -->\n        <div class=\"info-section\">\n          <div class=\"info-card\">\n            <h3>üéµ Getting Started</h3>\n            <ul>\n              <li>Click piano keys to play notes</li>\n              <li>Use QWERTY keys (Z-M) for keyboard playing</li>\n              <li>Adjust controls above to shape your sound</li>\n              <li>Drag across keys for glissando effect</li>\n            </ul>\n          </div>\n\n          <div class=\"info-card\">\n            <h3>üéõÔ∏è Quick Tips</h3>\n            <ul>\n              <li><strong>Saturation:</strong> Adds warm, tape-like color</li>\n              <li><strong>Compression:</strong> Controls dynamics</li>\n              <li><strong>Reverb:</strong> Adds space and ambience</li>\n              <li><strong>Envelope:</strong> Shapes note attack and decay</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    {:else}\n      <!-- Loading State -->\n      <div class=\"loading\">\n        <div class=\"spinner\"></div>\n        <p>Initializing audio system...</p>\n        <p class=\"loading-hint\">Click anywhere to unlock audio (iOS/mobile)</p>\n      </div>\n    {/if}\n  </div>\n</main>\n\n<style>\n  main {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    min-height: 100vh;\n    padding: 2rem;\n  }\n\n  .container {\n    max-width: 1400px;\n    width: 100%;\n    background: rgba(30, 41, 59, 0.8);\n    border-radius: 16px;\n    padding: 2rem;\n    border: 1px solid rgba(100, 116, 139, 0.2);\n    backdrop-filter: blur(10px);\n    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n  }\n\n  .header {\n    text-align: center;\n    margin-bottom: 2rem;\n    border-bottom: 2px solid rgba(100, 116, 139, 0.3);\n    padding-bottom: 1.5rem;\n  }\n\n  h1 {\n    font-size: 2.5rem;\n    margin: 0;\n    color: #f1f5f9;\n    font-weight: 700;\n  }\n\n  .subtitle {\n    margin: 0.5rem 0 0;\n    color: #cbd5e1;\n    font-size: 1rem;\n  }\n\n  .status-bar {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    gap: 2rem;\n    margin-top: 1rem;\n    padding-top: 1rem;\n  }\n\n  .status-indicator {\n    display: inline-flex;\n    align-items: center;\n    gap: 0.5rem;\n    font-size: 0.875rem;\n    font-weight: 600;\n    color: #94a3b8;\n  }\n\n  .status-indicator.active {\n    color: #22c55e;\n  }\n\n  .note-count {\n    font-size: 0.875rem;\n    color: #cbd5e1;\n    font-weight: 500;\n    padding: 0.25rem 0.75rem;\n    background: rgba(96, 165, 250, 0.1);\n    border-radius: var(--border-radius-sm);\n  }\n\n  .toggle-btn {\n    padding: 0.5rem 1rem;\n    background: rgba(96, 165, 250, 0.1);\n    color: var(--accent);\n    border: 1px solid rgba(96, 165, 250, 0.3);\n    border-radius: var(--border-radius-sm);\n    font-size: 0.875rem;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s ease;\n  }\n\n  .toggle-btn:hover {\n    background: rgba(96, 165, 250, 0.2);\n    border-color: rgba(96, 165, 250, 0.5);\n  }\n\n  .toggle-btn:active {\n    transform: scale(0.98);\n  }\n\n  .content {\n    display: flex;\n    flex-direction: column;\n    gap: 2rem;\n  }\n\n  .controls-section {\n    width: 100%;\n  }\n\n  .keyboard-section {\n    width: 100%;\n  }\n\n  .info-section {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n    gap: 1.5rem;\n    margin-top: 1rem;\n  }\n\n  .info-card {\n    background: rgba(15, 23, 42, 0.4);\n    border: 1px solid rgba(96, 165, 250, 0.1);\n    border-radius: var(--border-radius-md);\n    padding: 1.5rem;\n  }\n\n  .info-card h3 {\n    margin: 0 0 1rem 0;\n    color: var(--accent);\n    font-size: 1rem;\n    font-weight: 700;\n    text-transform: uppercase;\n    letter-spacing: 0.05em;\n  }\n\n  .info-card ul {\n    margin: 0;\n    padding-left: 1.5rem;\n    color: var(--text-secondary);\n    font-size: 0.875rem;\n    line-height: 1.6;\n  }\n\n  .info-card li {\n    margin-bottom: 0.5rem;\n  }\n\n  .info-card strong {\n    color: var(--text-primary);\n    font-weight: 600;\n  }\n\n  .error-state {\n    text-align: center;\n    padding: 4rem 2rem;\n    color: #fca5a5;\n  }\n\n  .error-icon {\n    font-size: 4rem;\n    margin: 0;\n  }\n\n  .error-state h2 {\n    color: #fca5a5;\n    margin: 1rem 0;\n  }\n\n  .error-message {\n    color: #fecaca;\n    font-family: 'Monaco', 'Courier New', monospace;\n    background: rgba(239, 68, 68, 0.1);\n    padding: 1rem;\n    border-radius: var(--border-radius-sm);\n    border: 1px solid rgba(239, 68, 68, 0.3);\n    margin: 1rem 0;\n  }\n\n  .error-help {\n    color: #cbd5e1;\n    font-size: 0.875rem;\n  }\n\n  .loading {\n    text-align: center;\n    color: #cbd5e1;\n    padding: 4rem 2rem;\n  }\n\n  .spinner {\n    width: 50px;\n    height: 50px;\n    margin: 0 auto 1.5rem;\n    border: 4px solid rgba(96, 165, 250, 0.2);\n    border-top-color: var(--accent);\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    to {\n      transform: rotate(360deg);\n    }\n  }\n\n  .loading p {\n    margin: 0.5rem 0;\n    color: #cbd5e1;\n    font-size: 1rem;\n  }\n\n  .loading-hint {\n    font-size: 0.875rem;\n    color: #94a3b8;\n    font-style: italic;\n  }\n\n  /* Responsive design */\n  @media (max-width: 1024px) {\n    .container {\n      padding: 1.5rem;\n    }\n\n    h1 {\n      font-size: 2rem;\n    }\n\n    .status-bar {\n      flex-direction: column;\n      gap: 0.75rem;\n    }\n  }\n\n  @media (max-width: 768px) {\n    main {\n      padding: 1rem;\n    }\n\n    .container {\n      padding: 1rem;\n    }\n\n    h1 {\n      font-size: 1.75rem;\n    }\n\n    .subtitle {\n      font-size: 0.875rem;\n    }\n\n    .info-section {\n      grid-template-columns: 1fr;\n    }\n\n    .content {\n      gap: 1.5rem;\n    }\n  }\n</style>\n","<!--\n  LoFi Piano Plugin - Main Page\n\n  This is the single-page app entry point.\n  The entire plugin UI renders on this page.\n-->\n\n<script>\n  import { onMount } from 'svelte';\n  import Layout from '$components/Layout.svelte';\n\n  onMount(() => {\n    console.log('üéπ LoFi Piano loaded');\n  });\n</script>\n\n<Layout />\n\n<style>\n  :global(main) {\n    width: 100%;\n    height: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n</style>\n"],"names":[],"mappings":";;wCAAA;;;;;;;;;;;;;;;EAgDA,CAAA;;;wCChDA;;EAcA,CAAA;;"}